{% extends 'base.html' %}
{% block title %}Paiement PayPal - LocaBien{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-warning text-dark">
                    <h4 class="mb-0"><i class="fab fa-paypal me-2"></i>Paiement PayPal</h4>
                </div>
                <div class="card-body text-center py-4">
                    <p class="text-muted mb-4">Cliquez sur le bouton ci-dessous pour finaliser votre paiement en toute securite.</p>
                    <div id="paypal-button-container" class="mb-3"></div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://www.paypal.com/sdk/js?client-id={{ paypal_client_id }}"></script>
<script>
    paypal.Buttons({
        createOrder: function(data, actions) {
            return actions.order.create({
                purchase_units: [{
                    amount: { value: '0.10' }
                }]
            });
        },
        onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
                window.location.href = '/payment-success/';
            });
        },
        onError: function(err) {
            alert('Une erreur est survenue. Veuillez reessayer.');
        }
    }).render('#paypal-button-container');
</script>
{% endblock %}
